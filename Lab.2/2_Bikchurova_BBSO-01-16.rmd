---
title: "Лабораторная работа №2. Исследование сетевых параметров публичных DNS серверов"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
### *Цель работы:*

  Проанализировать сетевые параметры публичных DNS серверов, сделать мотивированный вывод о предпочтительных серверах.
  
-------------------------------------------------------------------------------------------------------------------------------

### *Исходные данные:*

|     Устройство  | Операционная система | 
| --------------- | -------------------- |
|      Lenovo     |  Windows 10 x64      |

-------------------------------------------------------------------------------------------------------------------------------

### *Используемое ПО:*

  1. Rstudio IDE
  2. Traceroute/tracert
  3. Ping
  4. 2ip

-------------------------------------------------------------------------------------------------------------------------------

### *Исследуемые провайдеры DNS*

  1. Google Public DNS
  2. Cloudflare DNS
  3. OpenDNS
  4. MGTS
  
-------------------------------------------------------------------------------------------------------------------------------

### *Варианты решения задачи*

  1. Использовать утилиту tracert/traceroute
  2. Использовать ручной поиск, без утилит

-------------------------------------------------------------------------------------------------------------------------------

### *Общий план выполнения*

Для выполнения данной задачи буду использовать первый вариант решения.

##### 1. По исследуемым серверам собрать следующие данные:

  1.1.Маршрут
  
  1.2.Местоположение каждого узла маршрута к DNS-серверу
  
  1.3.Организацию, владеющую каждым узлом маршрута к DNS-серверу
  
  1.4.Среднюю RTT (round trip time) к DNS-серверу
  
##### 2. Выделить те узлы маршрута, которые вносят наибольшую временную задержку при передаче
##### 3. Сравнить сетевые параметры DNS серверов

-------------------------------------------------------------------------------------------------------------------------------

## Ход работы

### *1.Google Public DNS*
#### Маршрут:
```
>tracert 8.8.8.8

Трассировка маршрута к dns.google [8.8.8.8]
с максимальным числом прыжков 30:

  1     1 ms     3 ms    <1 ms  192.168.1.1
  2    10 ms     4 ms     4 ms  100.68.0.1
  3     9 ms     9 ms     9 ms  212.188.1.106
  4     3 ms     3 ms     4 ms  212.188.1.105
  5     5 ms     5 ms     5 ms  195.34.50.74
  6     5 ms     6 ms     5 ms  72.14.223.74
  7     6 ms     6 ms     7 ms  108.170.250.66
  8    23 ms    24 ms    23 ms  209.85.255.136
  9    21 ms    21 ms    21 ms  209.85.254.20
 10    24 ms    24 ms    24 ms  172.253.51.185
 11     *        *        *     Превышен интервал ожидания для запроса.
 12     *        *        *     Превышен интервал ожидания для запроса.
 13     *        *        *     Превышен интервал ожидания для запроса.
 14     *        *        *     Превышен интервал ожидания для запроса.
 15     *        *        *     Превышен интервал ожидания для запроса.
 16     *        *        *     Превышен интервал ожидания для запроса.
 17     *        *        *     Превышен интервал ожидания для запроса.
 18     *        *        *     Превышен интервал ожидания для запроса.
 19     *        *        *     Превышен интервал ожидания для запроса.
 20     *        *        *     Превышен интервал ожидания для запроса.
 21     *        *        *     Превышен интервал ожидания для запроса.
 22    23 ms    23 ms    22 ms  dns.google [8.8.8.8]
```
#### Среднее RTT:
```
ping 8.8.8.8

Обмен пакетами с 8.8.8.8 по с 32 байтами данных:
Ответ от 8.8.8.8: число байт=32 время=23мс TTL=45
Ответ от 8.8.8.8: число байт=32 время=22мс TTL=45
Ответ от 8.8.8.8: число байт=32 время=23мс TTL=45
Ответ от 8.8.8.8: число байт=32 время=23мс TTL=45

Статистика Ping для 8.8.8.8:
    Пакетов: отправлено = 4, получено = 4, потеряно = 0
    (0% потерь)
Приблизительное время приема-передачи в мс:
    Минимальное = 22мсек, Максимальное = 23 мсек, Среднее = 22 мсек
  
```
#### Местоположение и организация:

|  №    |         Узел            |     Местоположение  |    Организация   | 
| ----- | ------------------------| ------------------- | -----------------|
|  1    |     192.168.1.1         |      Не определен   |    IANA     | 
|  2    |     100.68.0.1          |  Лос-Анжелес, США   |    IANA     |  
|  3    |     212.188.1.106       |  Москва, РФ         |    MTS      |
|  4    |     212.188.1.105       |  Москва, РФ         |    MTS      | 
|  5    |     195.34.50.74        |  Москва, РФ         |  MTS PJSC   | 
|  6    |     72.14.223.74        |  Mountain View, США   | Google LLC | 
|  7    |     108.170.250.66      |  Mountain View, США   | Google LLC | 
|  8    |     209.85.255.136      |      Не определен   | Google LLC  |
|  9    |     209.85.254.20       |      Не определен   | Google LLC  |    
|  10   |     172.253.51.185      |  Mountain View, США   | Google LLC |        
|  11   |     Request timed out.  |                            |             |   
|  12   |     Request timed out.  |                            |             |   
|  13   |     Request timed out.  |                            |           
|  14   |     Request timed out.  |                            |
|  15   |     Request timed out.  |                            |
|  16   |     Request timed out.  |                            |
|  17   |     Request timed out.  |                            |
|  18   |     Request timed out.  |                            |
|  19   |     Request timed out.  |                            |
|  20   |     Request timed out.  |                            |           
|  21   |     Request timed out.  |                            |           
|  22   |     dns.google [8.8.8.8]|       США, Нью-Йорк        | Google LLC  |    

### *2.OpenDNS*
#### Маршрут:
```
tracert 208.67.222.222

Трассировка маршрута к resolver1.opendns.com [208.67.222.222]
с максимальным числом прыжков 30:

  1     1 ms     1 ms     1 ms  mygpon [192.168.1.254]
  2     3 ms     3 ms     3 ms  100.68.0.1
  3     4 ms     4 ms     6 ms  mpts-a197-51.msk.mts-internet.net [212.188.1.106]
  4     4 ms     3 ms     3 ms  a197-cr04-be12.51.msk.mts-internet.net [212.188.1.105]
  5   108 ms   109 ms   110 ms  che-cr02-ae1.63.sam.mts-internet.net [212.188.29.26]
  6    35 ms    35 ms    35 ms  psshag-cr01-ae10.63.chel.mts-internet.net [212.188.42.130]
  7    54 ms    56 ms    54 ms  bhm-cr01-ae12.74.nsk.mts-internet.net [195.34.50.154]
  8   221 ms   111 ms   109 ms  sem275-cr01-ae5.24.krsk.mts-internet.net [212.188.29.10]
  9   111 ms   109 ms   109 ms  akd-cr01-ae8.38.irk.mts-internet.net [212.188.29.138]
 10   108 ms   108 ms   108 ms  psskv-cr01-ae6.28.skv.mts-internet.net [212.188.28.213]
 11   108 ms   108 ms   108 ms  teat-cr01-ae0.28.blag.mts-internet.net [212.188.2.106]
 12     *        *        *     Превышен интервал ожидания для запроса.
 13   193 ms   194 ms   193 ms  resolver1.opendns.com [208.67.222.222]

```
#### Среднее RTT:
```
>ping  208.67.222.222

Обмен пакетами с 208.67.222.222 по с 32 байтами данных:
Ответ от 208.67.222.222: число байт=32 время=193мс TTL=51
Ответ от 208.67.222.222: число байт=32 время=193мс TTL=51
Ответ от 208.67.222.222: число байт=32 время=193мс TTL=51
Ответ от 208.67.222.222: число байт=32 время=193мс TTL=51

Статистика Ping для 208.67.222.222:
    Пакетов: отправлено = 4, получено = 4, потеряно = 0
    (0% потерь)
Приблизительное время приема-передачи в мс:
    Минимальное = 193мсек, Максимальное = 193 мсек, Среднее = 193 мсек
```
#### Местоположение и организация:
|  №    |          Узел           |     Местоположение      | Организация  |
| ----- | ----------------------- | ----------------------- | ------------ |
|  1    |      192.168.1.254      |      -       |   -    | 
|  2    |      100.68.0.1         |   Лос-Анжелес, США      |    IANA     |  
|  3    |      212.188.1.106      |      Москва, РФ         |    MTS      |
|  4    |      212.188.1.105      |      Москва, РФ         |    MTS      | 
|  5    |      212.188.29.26      |      Москва, РФ         |    MTS      |
|  6    |      212.188.42.130     |      Москва, РФ         |    MTS      |
|  7    |      195.34.50.154      |      Москва, РФ         |    MTS PJSC  | 
|  8    |      212.188.29.10      |      Москва, РФ         |    MTS      |
|  9    |      212.188.29.138     |      Москва, РФ         |    MTS      | 
|  10   |      212.188.28.213     |      Москва, РФ         |    MTS      |
|  11   |      212.188.2.106      |      Москва, РФ         |    MTS OJSC  |
|  12   | Превышен интервал ожидания для запроса.  |       |  | 
|  13   | resolver1.opendns.com [208.67.222.222]  |США, Сан-Франциско| 	Cisco OpenDNS, LLC  | 

### *3.Cloudflare DNS*
#### Маршрут:
```
>tracert 1.1.1.1

Трассировка маршрута к one.one.one.one [1.1.1.1]
с максимальным числом прыжков 30:

  1     1 ms    <1 мс    <1 мс  mygpon [192.168.1.254]
  2     4 ms     3 ms     3 ms  100.68.0.1
  3     7 ms     4 ms     4 ms  mpts-a197-51.msk.mts-internet.net [212.188.1.106]
  4     3 ms     3 ms     4 ms  a197-cr04-be12.51.msk.mts-internet.net [212.188.1.105]
  5    10 ms     7 ms     7 ms  212.188.33.197
  6     5 ms     4 ms     4 ms  one.one.one.one [1.1.1.1]

```
#### Среднее RTT:
```
>ping 1.1.1.1

Обмен пакетами с 1.1.1.1 по с 32 байтами данных:
Ответ от 1.1.1.1: число байт=32 время=4мс TTL=59
Ответ от 1.1.1.1: число байт=32 время=3мс TTL=59
Ответ от 1.1.1.1: число байт=32 время=3мс TTL=59
Ответ от 1.1.1.1: число байт=32 время=3мс TTL=59

Статистика Ping для 1.1.1.1:
    Пакетов: отправлено = 4, получено = 4, потеряно = 0
    (0% потерь)
Приблизительное время приема-передачи в мс:
    Минимальное = 3мсек, Максимальное = 4 мсек, Среднее = 3 мсек
    
```
Наибольшая временная задержка у 1го узла

#### Местоположение и организация:
|  №    |        Узел             |     Местоположение      | Организация  |
| ----- | ----------------------- | ----------------------- | ------------ |
|  1    |      192.168.1.254      |      -        |   -    | 
|  2    |      100.68.0.1         |   Лос-Анжелес, США      |    IANA     |  
|  3    |      212.188.1.106      |      Москва, РФ         |    MTS      |
|  4    |      212.188.1.105      |      Москва, РФ         |    MTS      | 
|  5    |      212.188.33.197     |      Москва, РФ         | MTS's p2p Network  | 
|  6    | one.one.one.one [1.1.1.1] |   Австралия   |APNIC and Cloudflare DNS Resolver project 	  | 

### *4.Mgts*
#### Маршрут:
```
>tracert 195.178.108.240

Трассировка маршрута к mgts.ru [195.178.108.240]
с максимальным числом прыжков 30:

  1     1 ms    <1 мс    <1 мс  mygpon [192.168.1.254]
  2     3 ms     3 ms     3 ms  100.68.0.1
  3     5 ms     4 ms     4 ms  10.215.240.113
  4     *        *        *     Превышен интервал ожидания для запроса.
  5     6 ms     6 ms     4 ms  10.215.240.117
  6     6 ms     4 ms     4 ms  94.29.127.186
  7     4 ms     4 ms     4 ms  94.29.127.185
  8     *        *        *     Превышен интервал ожидания для запроса.
  9     4 ms     5 ms     4 ms  62.112.96.34
 10     *        *        *     Превышен интервал ожидания для запроса.
 11     *        *        *     Превышен интервал ожидания для запроса.
 12     *        *        *     Превышен интервал ожидания для запроса.
 13     *        *        *     Превышен интервал ожидания для запроса.
 14     *        *        *     Превышен интервал ожидания для запроса.
 15     *        *        *     Превышен интервал ожидания для запроса.
 16     *        *        *     Превышен интервал ожидания для запроса.
 17     *        *        *     Превышен интервал ожидания для запроса.
 18     *        *        *     Превышен интервал ожидания для запроса.
 19     *        *        *     Превышен интервал ожидания для запроса.
 20     *        *        *     Превышен интервал ожидания для запроса.
 21     *        *        *     Превышен интервал ожидания для запроса.
 22     *        *        *     Превышен интервал ожидания для запроса.
 23     *        *        *     Превышен интервал ожидания для запроса.
 24     *        *        *     Превышен интервал ожидания для запроса.
 25     *        *        *     Превышен интервал ожидания для запроса.
 26     *        *        *     Превышен интервал ожидания для запроса.
 27     *        *        *     Превышен интервал ожидания для запроса.
 28     *        *        *     Превышен интервал ожидания для запроса.
 29     *        *        *     Превышен интервал ожидания для запроса.
 30     *        *        *     Превышен интервал ожидания для запроса.

```
#### Среднее RTT:
```
>ping 195.178.108.240

Обмен пакетами с 195.178.108.240 по с 32 байтами данных:
Превышен интервал ожидания для запроса.
Превышен интервал ожидания для запроса.
Превышен интервал ожидания для запроса.
Превышен интервал ожидания для запроса.

Статистика Ping для 195.178.108.240:
    Пакетов: отправлено = 4, получено = 0, потеряно = 4
    (100% потерь)
```
#### Местоположение и организация:
|  №    |         Узел            |     Местоположение      | Организация  |
| ----- | ----------------------- | ----------------------- | ------------ |
|  1    |      192.168.1.254      |      -        |   -    | 
|  2    |      100.68.0.1         |     Лос-Анжелес, США    |     IANA     |  
|  3    |      10.215.240.113     |     Лос-Анжелес, США    |     IANA     |
|  4    |   Request timed out.    |     Лос-Анжелес, США    |     IANA     | 
|  5    |      10.215.240.117     |     Лос-Анжелес, США    |     IANA     |
|  6    |      94.29.127.186      |     Москва, РФ          | 	OAO MGTS   |
|  7    |      94.29.127.185      |     Москва, РФ          | 	OAO MGTS   |
|  8    |   Request timed out.    |                         |              |
|  9    |      62.112.96.34       |     Москва, РФ          | 	USPD staff |
|  10   |   Request timed out.    |                         |              |
|  11   |   Request timed out.    |                         |              |
|  12   |   Request timed out.    |                         |              |
|  13   |   Request timed out.    |                         |              |
|  14   |   Request timed out.    |                         |              |
|  15   |   Request timed out.    |                         |              |
|  16   |   Request timed out.    |                         |              |
|  17   |   Request timed out.    |                         |              | 
|  18   |   Request timed out.    |                         |              |
|  19   |   Request timed out.    |                         |              |  
|  20   |   Request timed out.    |                         |              | 
|  21   |   Request timed out.    |                         |              |  
|  22   |   Request timed out.    |                         |              |  
|  23   |   Request timed out.    |                         |              |  
|  24   |   Request timed out.    |                         |              |
|  25   |   Request timed out.    |                         |              |   
|  26   |   Request timed out.    |                         |              |
|  27   |   Request timed out.    |                         |              |  
|  28   |   Request timed out.    |                         |              |  
|  29   |   Request timed out.    |                         |              |  
|  30   |   Request timed out.    |                         |              | 

## *Сравнительная диаграмма*

#### Используемые цвета:

1. Google DNS - красный
2. OpenDNS - зелёный
3. Cloudflare DNS - оранжевый
4. Mgts - голубой

```{r, echo=FALSE}
x <- c(0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100,105,110,115,120,125,130,135,140,145,150,155,160,165,170,175,180,185,190,195,200)
y <- c(0,0.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5,19,19.5,20)
x_1 <- c(23,22,23,23)
y_1 <- c(1,2,3,4)
x_2 <- c(193,193,193,193)
y_2 <- c(1,2,3,4)
x_3 <- c(4,3,3,3)
y_3 <- c(1,2,3,4)
x_4 <- c(0,0,0,0)
y_4 <- c(1,2,3,4)

plot(y,x,main = "Сравнительная диаграмма RTT к серверам", xlab = "Step", ylab = "RTT",type = "n")
points(y_1,x_1, col = "red")
lines(y_1,x_1, col = "red")
points(y_2,x_2, col = "green")
lines(y_2,x_2, col = "green")
points(y_3,x_3, col = "orange")
lines(y_3,x_3, col = "orange")
points(y_4,x_4, col = "blue")
lines(y_4,x_4, col = "blue")
```

## *Оценка результатов:*
Меньше всего времени потребовалось для обмена пакетов для Google DNS и Cloudflare DNS.

## *Вывод:*
Мной были проанализированы сетевые параметры публичных DNS серверов. В ходе исследования, было выяснено, что канал домашнего провайдера является загруженным.


